# Tool Definition: docs_ingest
# MCP Server: local-knowledge

tool:
  id: docs_ingest
  name: Ingest Document
  description: Ingest a document into the local knowledge index for keyword search.
  version: "1.0.0"
  
  # MCP binding
  mcp:
    server: local-knowledge
    method: tools/call
    tool_name: docs_ingest
  
  # Governance
  risk_tier: medium
  idempotent: false  # Updates existing docs
  
  # Access control
  scopes:
    data: [knowledge:write]
    actions: [ingest]
  required_roles: [knowledge_admin, executive]
  
  # SLA
  timeout_ms: 10000
  retry_policy: none  # Don't retry writes
  
  # Schemas
  input_schema:
    type: object
    properties:
      id:
        type: string
        description: Unique identifier for the document
      text:
        type: string
        description: The full text content of the document
        maxLength: 100000
      metadata:
        type: object
        description: Optional metadata (author, tags, source, etc.)
    required: [id, text]
    
  output_schema:
    type: object
    properties:
      success:
        type: boolean
      action:
        type: string
        enum: [created, updated]
      id:
        type: string
      tokenCount:
        type: integer
    required: [success, id]
    
  # Redaction - important for document ingestion
  redaction:
    input:
      - field: text
        action: pii_scan
    output: []
